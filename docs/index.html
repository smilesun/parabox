<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Define Parameter Spaces, Generate Designs and Check Feasibilities • phng</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Define Parameter Spaces, Generate Designs and Check Feasibilities">
<meta property="og:description" content="A successor of the ParamHelpers Package.
    Easily define parameter spaces and generate LHS and random designs from it.
    Check parameter values for feasibility.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">phng</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-file-text-o"></span>
     
    Topics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/supplementary/tree_structured_paramsets.html">Tree structured ParamSets</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">
    <span class="fa fa-book"></span>
     
    Reference
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/phng">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="paramsettree" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#paramsettree" class="anchor"></a>ParamSetTree</h1></div>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<p>Install the Tree branch</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"mlr-org/phng"</span>, <span class="dt">ref =</span> <span class="st">"tree"</span>)</code></pre></div>
<p>This tutorial will guide you how to set up conditional hyperparameters for SVM and Random Forest, setting up Machine Learning Pipeline and Deep Learning Architecture</p>
</div>
<div id="support-vector-machinerandom-forest-model-multiplexer-hyper-parameter-specification" class="section level2">
<h2 class="hasAnchor">
<a href="#support-vector-machinerandom-forest-model-multiplexer-hyper-parameter-specification" class="anchor"></a>Support Vector Machine/Random Forest Model Multiplexer Hyper-parameter Specification</h2>
<p>Some hyper-parameters could depend on other hyper-parameters. For example, if we have a model multiplexer of Support Vector Machine(SVM) and Random Forest(RF). The hyper-parameter “kernel” only makes sense if the chosen model is “SVM”. Moreover, the hyper-parameter of “gamma” only makes sense if the chosen kernel for “SVM” is “rbf”. This kind of relationship resembles a tree or directed graph structure where a node is only activated when its corresponding parent node is activated.</p>
<p>To tackle the above mentioned problem, we have the following code. Each separate hyper-parameter has a unique identifier called “id” which is defined inside the ParamSimple(ParamCategorical, ParamReal, ..etc). These “id”s are extracted from ParamSimple and used as the unique identifier as the node in the tree as well.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(phng)
pst =<span class="st"> </span>ParamSetTree<span class="op">$</span><span class="kw">new</span>(<span class="st">"test"</span>,
  ParamCategorical<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"model"</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"SVM"</span>, <span class="st">"RF"</span>)),
  <span class="kw"><a href="reference/addDep.html">addDep</a></span>(
    ParamReal<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"C"</span>, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">100</span>), 
    <span class="dt">did =</span> <span class="st">"model"</span>, <span class="dt">expr =</span> <span class="kw">quote</span>(model <span class="op">==</span><span class="st"> "SVM"</span>)), <span class="co"># did here means dependant id</span>
  <span class="kw"><a href="reference/addDep.html">addDep</a></span>(
    ParamCategorical<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"kernel"</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"rbf"</span>, <span class="st">"poly"</span>)), 
    <span class="dt">did =</span> <span class="st">"model"</span>, <span class="dt">expr =</span> <span class="kw">quote</span>(model <span class="op">==</span><span class="st"> "SVM"</span>)),
  <span class="kw"><a href="reference/addDep.html">addDep</a></span>(
    ParamReal<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"gamma"</span>, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">101</span>), 
    <span class="dt">did =</span> <span class="st">"kernel"</span>, <span class="dt">expr =</span> <span class="kw">quote</span>(kernel <span class="op">==</span><span class="st"> "rbf"</span>)),
  <span class="kw"><a href="reference/addDep.html">addDep</a></span>(
    ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"n"</span>, <span class="dt">lower =</span> 1L, <span class="dt">upper =</span> 10L), 
    <span class="dt">did =</span> <span class="st">"kernel"</span>, <span class="dt">expr =</span> <span class="kw">quote</span>(kernel <span class="op">==</span><span class="st"> "poly"</span>)),
  <span class="kw"><a href="reference/addDep.html">addDep</a></span>(
    ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"n_tree"</span>, <span class="dt">lower =</span> 1L, <span class="dt">upper =</span> 10L), 
    <span class="dt">did =</span> <span class="st">"model"</span>, <span class="dt">expr =</span> <span class="kw">quote</span>(model <span class="op">==</span><span class="st"> "RF"</span>))
)
pst<span class="op">$</span><span class="kw">sample</span>(1L)
##    model        C n_tree kernel  n    gamma
## 1:   SVM 78.83051     NA    rbf NA 89.18476
pst<span class="op">$</span><span class="kw">sample</span>(10L)
##     model        C n_tree kernel  n    gamma
##  1:    RF       NA      1   &lt;NA&gt; NA       NA
##  2:    RF       NA      9   &lt;NA&gt; NA       NA
##  3:    RF       NA      5   &lt;NA&gt; NA       NA
##  4:    RF       NA      5   &lt;NA&gt; NA       NA
##  5:    RF       NA      6   &lt;NA&gt; NA       NA
##  6:   SVM 89.98250     NA    rbf NA 4.248013
##  7:   SVM 95.45036     NA   poly  7       NA
##  8:    RF       NA     10   &lt;NA&gt; NA       NA
##  9:    RF       NA      8   &lt;NA&gt; NA       NA
## 10:    RF       NA      6   &lt;NA&gt; NA       NA</code></pre></div>
</div>
<div id="machine-learning-pipeline-specification" class="section level2">
<h2 class="hasAnchor">
<a href="#machine-learning-pipeline-specification" class="anchor"></a>Machine learning pipeline specification</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pst =<span class="st"> </span>ParamSetTree<span class="op">$</span><span class="kw">new</span>(<span class="st">"pre"</span>,     
  ParamCategorical<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"preprocessing"</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"PCA"</span>, <span class="st">"FeatureFiltering"</span>)),
  <span class="kw"><a href="reference/addDep.html">addDep</a></span>(
    ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"pca.k"</span>, <span class="dt">lower =</span> <span class="dv">1</span>, <span class="dt">upper =</span> <span class="dv">5</span>), 
    <span class="dt">did =</span> <span class="st">"preprocessing"</span>, <span class="dt">expr =</span> <span class="kw">quote</span>(preprocessing <span class="op">==</span><span class="st"> "PCA"</span>)),
 <span class="kw"><a href="reference/addDep.html">addDep</a></span>(
   ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"filter.n"</span>, <span class="dt">lower =</span> <span class="dv">1</span>, <span class="dt">upper =</span> <span class="dv">10</span>), 
   <span class="dt">did =</span> <span class="st">"preprocessing"</span>, <span class="dt">expr =</span> <span class="kw">quote</span>(preprocessing <span class="op">==</span><span class="st"> "FeatureFiltering"</span>))
)

pst1 =<span class="st"> </span>ParamSetTree<span class="op">$</span><span class="kw">new</span>(<span class="st">"ml"</span>,
  ParamCategorical<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"model"</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"SVM"</span>, <span class="st">"RF"</span>)),
  <span class="kw"><a href="reference/addDep.html">addDep</a></span>(
    ParamReal<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"C"</span>, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">100</span>), 
    <span class="dt">did =</span> <span class="st">"model"</span>, <span class="dt">expr =</span> <span class="kw">quote</span>(model <span class="op">==</span><span class="st"> "SVM"</span>)), <span class="co"># did here means dependant id</span>
  <span class="kw"><a href="reference/addDep.html">addDep</a></span>(
    ParamCategorical<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"kernel"</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"rbf"</span>, <span class="st">"poly"</span>)), 
    <span class="dt">did =</span> <span class="st">"model"</span>, <span class="dt">expr =</span> <span class="kw">quote</span>(model <span class="op">==</span><span class="st"> "SVM"</span>)),
  <span class="kw"><a href="reference/addDep.html">addDep</a></span>(
    ParamReal<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"gamma"</span>, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">101</span>), 
    <span class="dt">did =</span> <span class="st">"kernel"</span>, <span class="dt">expr =</span> <span class="kw">quote</span>(kernel <span class="op">==</span><span class="st"> "rbf"</span>)),
  <span class="kw"><a href="reference/addDep.html">addDep</a></span>(
    ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"poly.n"</span>, <span class="dt">lower =</span> 1L, <span class="dt">upper =</span> 10L), 
    <span class="dt">did =</span> <span class="st">"kernel"</span>, <span class="dt">expr =</span> <span class="kw">quote</span>(kernel <span class="op">==</span><span class="st"> "poly"</span>)),
  <span class="kw"><a href="reference/addDep.html">addDep</a></span>(
    ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"n_tree"</span>, <span class="dt">lower =</span> 1L, <span class="dt">upper =</span> 10L), 
    <span class="dt">did =</span> <span class="st">"model"</span>, <span class="dt">expr =</span> <span class="kw">quote</span>(model <span class="op">==</span><span class="st"> "RF"</span>))
)
pst<span class="op">$</span><span class="kw">setChild</span>(pst1)
pst<span class="op">$</span><span class="kw">sample</span>(4L)
##       preprocessing pca.k filter.n model        C n_tree kernel poly.n
## 1:              PCA     1       NA    RF       NA     10   &lt;NA&gt;     NA
## 2: FeatureFiltering    NA        8   SVM 47.77960     NA   poly      3
## 3:              PCA     2       NA   SVM 41.45463     NA    rbf     NA
## 4:              PCA     1       NA   SVM 46.59625     NA    rbf     NA
##       gamma
## 1:       NA
## 2:       NA
## 3: 37.25339
## 4: 86.64060</code></pre></div>
</div>
<div id="neural-network-architecture-specification" class="section level2">
<h2 class="hasAnchor">
<a href="#neural-network-architecture-specification" class="anchor"></a>Neural network architecture specification</h2>
<p>Multiple Layers</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ps =<span class="st"> </span>ParamSetTreeRe<span class="op">$</span><span class="kw">new</span>(<span class="st">"nn"</span>, <span class="dt">nr =</span> <span class="dv">2</span>,
  ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"layer_dense.units"</span>, <span class="dt">lower =</span> 2L, <span class="dt">upper =</span> 1000L),
  ParamReal<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"kernel_regularizer"</span>, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="fl">3.0</span>), 
  ParamReal<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"bias_regularizer"</span>, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="fl">3.0</span>), 
  ParamCategorical<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"reg_type"</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"regularizer_l1"</span>, <span class="st">"regularizer_l2"</span>)),
  ParamCategorical<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"activation_fun"</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"sigmoid"</span>, <span class="st">"tanh"</span>, <span class="st">"linear"</span>)))
ps<span class="op">$</span><span class="kw">sample</span>(3L)
##    L0.bias_regularizer    L0.reg_type L0.layer_dense.units
## 1:           0.1374935 regularizer_l1                  800
## 2:           1.3455490 regularizer_l2                  813
## 3:           0.7308584 regularizer_l2                  419
##    L0.kernel_regularizer L0.activation_fun L1.bias_regularizer
## 1:             0.3656978              tanh           0.6195942
## 2:             2.3830270              tanh           2.2634255
## 3:             2.3645875           sigmoid           1.3046782
##       L1.reg_type L1.layer_dense.units L1.kernel_regularizer
## 1: regularizer_l1                  754            2.68513608
## 2: regularizer_l2                  711            0.00187432
## 3: regularizer_l2                  894            2.65940718
##    L1.activation_fun L2.bias_regularizer    L2.reg_type
## 1:              tanh           1.9953456 regularizer_l1
## 2:              tanh           0.6603567 regularizer_l1
## 3:           sigmoid           0.3920871 regularizer_l2
##    L2.layer_dense.units L2.kernel_regularizer L2.activation_fun
## 1:                  385             0.8231509            linear
## 2:                  614             1.0553937           sigmoid
## 3:                  345             1.9702744           sigmoid</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(keras)
ps<span class="op">$</span><span class="kw">sample</span>()
list.par.val =<span class="st"> </span>ps<span class="op">$</span><span class="kw">sampleList</span>(<span class="dt">flat =</span> <span class="ot">FALSE</span>)
tex =<span class="st"> </span><span class="kw"><a href="reference/keras_helper.html">keras_helper</a></span>(<span class="dt">input.shape =</span> <span class="dv">256</span>, <span class="dt">output.shape =</span> 10L, 
  <span class="dt">output.act =</span> <span class="st">"softmax"</span>, <span class="dt">loss =</span> <span class="st">"mse"</span>, 
  <span class="dt">lr =</span> <span class="fl">0.0025</span>, <span class="dt">list.par.val =</span> list.par.val)
<span class="kw">eval</span>(<span class="kw">parse</span>(<span class="dt">text =</span> tex))</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/mlr-org/phng">https://​github.com/​mlr-org/​phng</a>
</li>
<li>Report a bug at <br><a href="https://github.com/mlr-org/phng/issues">https://​github.com/​mlr-org/​phng/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jakob Richter <br><small class="roles"> Maintainer, author </small>  </li>
<li>Xudong Sun <br><small class="roles"> Author </small>  </li>
<li>Michel Lang <br><small class="roles"> Author </small>  </li>
<li>Bernd Bischl <br><small class="roles"> Author </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jakob Richter, Xudong Sun, Michel Lang, Bernd Bischl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
